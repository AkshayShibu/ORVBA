{% extends 'user_home.html' %}
{% load static %}

{% block user %}
<div class="container mt-5 mb-5">
    <div class="row">
        <div class="col-md-6">
            <img src="{{ product.image.url }}" class="img-fluid rounded" alt="{{ product.name }}">
        </div>
        <div class="col-md-6">
            <h2 class="mb-3">{{ product.name }}</h2>
            <p class="text-muted">Category: {{ product.category.name }}</p>
            <h3 class="text-primary mb-4">₹{{ product.price }}</h3>
            
            <div class="mb-4">
                <h5>Description:</h5>
                <p>{{ product.description }}</p>
            </div>
            
            <div class="d-grid gap-2">
                <a href="{% url 'add_to_cart' product.id %}?next={{ request.path|urlencode }}" class="btn bac btn-lg">
                    <i class="fas fa-shopping-cart"></i> Add to Cart
                </a>
                <a href="{% url 'buy_now' product.id %}" class="btn btn-dark btn-lg">
                    <i class="fas fa-bolt"></i> Buy Now
                </a>
            </div>
            
            {% if product.stock <= 5 and product.stock > 0 %}
            <div class="alert alert-warning mt-3">
                <i class="fas fa-exclamation-triangle"></i> Only {{ product.stock }} left in stock!
            </div>
            {% elif product.stock <= 0 %}
            <div class="alert alert-danger mt-3">
                <i class="fas fa-times-circle"></i> Out of stock!
            </div>
            {% endif %}
        </div>
    </div>
    
    <!-- Related Products -->
    {% if related_products %}
    <div class="mt-5">
        <h3 class="mb-4">Related Products</h3>
        <div class="row row-cols-1 row-cols-md-4 g-4">
            {% for related in related_products %}
            <div class="col">
                <div class="card h-100">
                    <img src="{{ related.image.url }}" class="card-img-top" alt="{{ related.name }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ related.name }}</h5>
                        <p class="card-text text-primary fw-bold">₹{{ related.price }}</p>
                    </div>
                    <div class="card-footer">
                        <a href="{% url 'product_detail' related.id %}" class="btn btn-sm btn-dark w-100">View Details</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}